(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,o){e.exports={App:"App_App__15LM-","App-logo":"App_App-logo__1GLNd","App-logo-spin":"App_App-logo-spin__1EbLw","App-header":"App_App-header__3nnPn","App-link":"App_App-link__TRj1P"}},101:function(e,t){},206:function(e,t,o){e.exports=o(361)},211:function(e,t,o){},219:function(e,t){},225:function(e,t){},361:function(e,t,o){"use strict";o.r(t);var a=o(0),r=o.n(a),n=o(36),i=o.n(n),l=(o(211),o(20)),s=o(21),d=o(24),c=o(22),u=o(23),p=o(58),m=o(100),h=o.n(m),b=o(8),g=o(45),y=o.n(g),f=o(112),v=o.n(f),k=o(26),w={"App.title":"Tide Times","App.action.login":"Login","App.sidebar.title":"Sites","App.text.yesterday":"Yesterday","App.text.today":"Today","App.text.tomorrow":"Tomorrow","App.error.no_site_id":"No Site ID","App.error.loading":"Loading...","App.error.no_data_avail":"No data available"},D={"en-GB":w,en_GB:w,"en-UK":w,en_UK:w,"es-ES":{"App.title":"Tiempo de la Marea","App.action.login":"Login","App.sidebar.title":"Lugares","App.text.yesterday":"Ayer","App.text.today":"Ahoy","App.text.tomorrow":"Manana","App.error.no_site_id":"No Site ID [es]","App.error.loading":"Loading... [es]","App.error.no_data_avail":"No data available  [es]"}},S=o(103),T=o.n(S),E=o(104),C=o.n(E),j=o(366),O={list:{width:250},fullList:{width:"auto"},root:{background:"yellow",color:"red"}},A=function(e){function t(){var e,o;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(o=Object(d.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={drawIsOpen:!1,siteId:null},o.openTheDrawer=function(){o.setState({drawIsOpen:!0})},o.closeTheDrawer=function(){o.setState({drawIsOpen:!1})},o}return Object(u.a)(t,e),Object(s.a)(t,[{key:"sideButtonClicked",value:function(e){this.props.history.push("/?siteId="+e)}},{key:"render",value:function(){return r.a.createElement("div",{className:O.root},this.props.children)}}]),t}(a.Component),L=Object(j.a)(Object(b.withStyles)(O)(A)),M=o(46),N=o(108),x=o.n(N),W=o(109),Y=o.n(W),H=o(30),I=o.n(H),_=o(110),F=o.n(_),U=o(6),P=o(25),R=o.n(P),B=o(7),G=o.n(B),q=function(e){var t=e.tideTimeDate,o=t&&t.time?t.time:"---";return r.a.createElement(U.i,{variant:"h6"},o)},J=o(111),K=o.n(J);var X=Object(k.d)(Object(b.withStyles)(function(e){return{root:{width:"100%",marginTop:e.spacing.unit,overflowX:"auto"},table:{width:"100%",minWidth:0,colWidth:"2rem",tableLayout:"fixed",borderWidth:1,borderColor:"black",borderStyle:"solid"},tideLevelLow:{backgroundColor:R.a[100],borderWidth:1,borderColor:"black",borderStyle:"solid"},tideLevelHigh:{backgroundColor:R.a[200],borderWidth:1,borderColor:"black",borderStyle:"solid",textColor:"yellow"},columnHeader:{backgroundColor:"orange",borderWidth:1,borderColor:"black",borderStyle:"solid"},todayColumnHeader:{backgroundColor:"darkOrange",borderWidth:2,borderColor:"black",borderStyle:"solid"},todayColumnTideLevelLow:{backgroundColor:R.a[300],borderWidth:2,borderColor:"black",borderStyle:"solid"},todayColumnTideLevelHigh:{backgroundColor:R.a[500],borderWidth:2,borderColor:"black",borderStyle:"solid"},timeInFuture:{backgroundColor:K.a[500],borderWidth:2,borderColor:"black",borderStyle:"dashed"}}})(function(e){return r.a.createElement(U.i,{variant:"body1"},function(e,t){var o=G()(e).fromNow();return G()(e).calendar(null,{lastWeek:"[Last] dddd",lastDay:"["+t.formatMessage({id:"App.text.yesterday"})+"]",sameDay:"["+t.formatMessage({id:"App.text.today"})+"]",nextDay:"["+t.formatMessage({id:"App.text.tomorrow"})+"]",nextWeek:"dddd",sameElse:function(){return"["+o+"]"}})}(e.theDate,e.intl))})),$=o(9),V=o.n($);var z=Object(b.withStyles)(function(e){return{root:{width:"100%",marginTop:e.spacing.unit,overflowX:"auto"},table:{width:"100%",minWidth:0,colWidth:"2rem",tableLayout:"fixed",borderWidth:1,borderColor:"black",borderStyle:"solid"},tideLevelLow:{backgroundColor:R.a[100],borderWidth:1,borderColor:"black",borderStyle:"solid"},tideLevelHigh:{backgroundColor:R.a[200],borderWidth:1,borderColor:"black",borderStyle:"solid",textColor:"yellow"},columnHeader:{backgroundColor:"orange",borderWidth:1,borderColor:"black",borderStyle:"solid"},todayColumnHeader:{backgroundColor:"darkOrange",borderWidth:2,borderColor:"black",borderStyle:"solid"},todayColumnTideLevelLow:{backgroundColor:R.a[300],borderWidth:2,borderColor:"black",borderStyle:"solid"},todayColumnTideLevelHigh:{backgroundColor:R.a[500],borderWidth:2,borderColor:"black",borderStyle:"solid"},timeInFuture:{textColor:"red"}}})(function(e){var t=e.classes,o=[];if(!e.data)return r.a.createElement(U.i,{variant:"h6"},"No Data for Site");Object.keys(e.data).forEach(function(e,t){var a=G()(e,"YYYYMMDD");o.push(a)});var a=[[],[],[],[]],n=function(t){Object.keys(e.data).forEach(function(o){var r=e.data[o],n=G()(o,"YYYYMMDD").isAfter(G()()),i=G()(o,"YYYYMMDD").isSame(G()(),"day");r&&(r[t]?(r[t].isFuture=n,r[t].isToday=i):r[t]={isFuture:n,isToday:i}),a[t].push(r[t])})};for(var i in[0,1,2,3])n(i);return r.a.createElement(U.c,{className:t.table},r.a.createElement(U.f,{className:t.columnHeader},r.a.createElement(U.g,null,o.map(function(e){var o=function(e){return e.isSame(G()(),"day")}(e)?t.todayColumnHeader:t.inherit;return r.a.createElement(U.e,{key:e,className:V()(o)},r.a.createElement(X,{theDate:e}))}))),r.a.createElement(U.d,null,a.map(function(e,o){return r.a.createElement(U.g,{key:o},e.map(function(e,a){var n=[];return e&&(e.isLow?(n.push(t.tideLevelLow),e.isToday&&n.push(t.todayColumnTideLevelLow)):(n.push(t.tideLevelHigh),e.isToday&&n.push(t.todayColumnTideLevelHigh)),e.isFuture&&n.push(t.timeInFuture)),r.a.createElement(U.e,{key:o+a,className:V()(n)},r.a.createElement(q,{tideTimeDate:e}))}))})))}),Q=function(e){function t(){var e,o;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(o=Object(d.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={tideInfo:null},o}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("NextTideTime.componentDidMount()"),console.log(this.props);var t=G()(),o=null,a=null,r=[];Object.keys(this.props.data).forEach(function(t){e.props.data[t].forEach(function(e){var o=G()(t+" "+e.time,"YYYYMMDD hh:mm");r.push({time:o,isLow:e.isLow})})}),r.some(function(e,n){return!!(n>0&&t.isBetween(r[n-1].time,e.time))&&(e.isLow?(a=e.time,o=r[n+1].time):(o=e.time,a=r[n+1].time),!0)}),this.setState({tideInfo:this.props.data,nextHighTime:o||null,nextLowTime:a||null})}},{key:"render",value:function(){if(console.log("NextTideTime.render()"),console.log(this.state),!this.state.tideInfo)return null;var e=G()(),t=this.state.nextHighTime,o=this.state.nextLowTime,a=t?G.a.duration(t.diff(e)):G.a.duration(),n=o?G.a.duration(o.diff(e)):G.a.duration(),i=r.a.createElement("div",null,r.a.createElement(U.i,{variant:"body1"},"Next High : @ ",t?t.format("HH:mm")+" (in "+a.get("hours")+"hr "+a.get("minutes")+"min)":"N/A"),r.a.createElement(U.i,{variant:"body1"},"Next Low  : @ ",o?o.format("HH:mm")+" (in "+n.get("hours")+"hr "+n.get("minutes")+"min)":"N/A")),l=r.a.createElement("div",null,r.a.createElement(U.i,{variant:"body1"},"Next Low  : @ ",o?o.format("HH:mm")+" (in "+n.get("hours")+"hr "+n.get("minutes")+"min)":"N/A"),r.a.createElement(U.i,{variant:"body1"},"Next High : @ ",t?t.format("HH:mm")+" (in "+a.get("hours")+"hr "+a.get("minutes")+"min)":"N/A"));return a.asMilliseconds()<n.asMilliseconds()?i:l}}]),t}(r.a.Component),Z=function(e){function t(){var e,o;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(o=Object(d.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).siteNames={salcombe:"Salcombe",newquay:"Newquay","exmouth-dock":"Exmouth"},o.state={siteToDisplay:"",siteDate:{}},o.handleTabChange=function(e,t){if(null!=o.mouseDownTstamp){var a=e.timeStamp-o.mouseDownTstamp;console.log("Diff = "+a),a>1e3?e.stopPropagation():o.props.history.push("/?siteId="+t)}o.mouseDownTstamp=null},o.handleMouseUp=function(e){console.log("Mouse Up "+e.timeStamp)},o.handleMouseDown=function(e){console.log("Mouse Down "+e.timeStamp),o.mouseDownTstamp=e.timeStamp},o.mouseDownTstamp=null,o}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props),this.setState({siteData:this.props.siteData,siteToDisplay:Object.keys(this.props.siteData)[0]})}},{key:"componentWillReceiveProps",value:function(e){this.setState({siteData:e.siteData,siteToDisplay:Object.keys(e.siteData)[0]})}},{key:"render",value:function(){var e=this,t=this.props.classes,o=this.state,a=o.siteData,n=o.siteToDisplay;return a?r.a.createElement("div",{className:t.root},r.a.createElement(U.h,{value:n,onChange:this.handleTabChange,indicatorColor:"secondary",textColor:"primary",fullWidth:!0,classes:{root:t.tabsRoot,indicator:t.tabsIndicator}},Object.keys(this.siteNames).map(function(o,a){return r.a.createElement(U.b,{disableRipple:!0,label:e.siteNames[o],key:o,value:o,classes:{root:t.tabRoot,selected:t.tabSelected},onMouseDown:e.handleMouseDown,onMouseUp:e.handleMouseUp})})),""===n?r.a.createElement("div",null,"Nothing to see"):r.a.createElement(U.a,null,r.a.createElement(z,{data:a[n]}),r.a.createElement(Q,{data:a[Object.keys(a)[0]]}))):r.a.createElement(U.i,{variant:"h3"},"No Data")}}]),t}(r.a.Component),ee=Object(b.withStyles)(function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper},tabsRoot:{borderBottom:"2px solid #e8e8e8"},tabsIndicator:{backgroundColor:"orange",height:"2px"},tabRoot:{textTransform:"initial",minWidth:96,fontWeight:e.typography.fontWeightRegular,marginRight:e.spacing.unit,fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),"&:hover":{color:"#40a9ff",opacity:1},"&$tabSelected":{color:"blue",backgroundColor:"lightBlue",fontWeight:e.typography.fontWeightMedium},"&:focus":{color:"#40a9ff"}},tabSelected:{},typography:{padding:e.spacing.unit}}})(Object(j.a)(Z));var te=function(e){function t(e){var o;return Object(l.a)(this,t),(o=Object(d.a)(this,Object(c.a)(t).call(this,e))).state={loading:!1,siteName:null,data:null},console.log("TideTimes.constructor()"),o.todayStr=G()().format("YYYYMMDD").toString(),o.yesterdayStr=G()().subtract(1,"day").format("YYYYMMDD").toString(),o.tomorrowStr=G()().add(1,"day").format("YYYYMMDD").toString(),o.loadData=o.loadData.bind(Object(M.a)(o)),o}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){console.log("TideTimes.componentDidMount()"),console.log(this.props),this.loadData(t.getSiteNameFromProps(this.props),[this.yesterdayStr,this.todayStr,this.tomorrowStr].join(","))}},{key:"componentDidUpdate",value:function(){console.log("TideTimes.componentDidUpdate()"),null===this.state.data&&this.loadData(this.state.siteName,[this.yesterdayStr,this.todayStr,this.tomorrowStr].join(","))}},{key:"setHighLowFlags",value:function(e){Object.keys(e).forEach(function(t){Object.keys(e[t]).forEach(function(o){var a=e[t][o],r=a[0].height<a[1].height;a.forEach(function(e){e.isLow=r,r=!r})})})}},{key:"decorateTideTimes",value:function(e){this.setHighLowFlags(e)}},{key:"loadData",value:function(e,t){var o=this;e=e||"salcombe",t=t||Y()(new Date,"yyyymmdd"),console.log("TideTimes.loadData() siteId = "+e+" For "+t),x.a.get("https://opalescent-radiator.glitch.me?locationIds="+e+"&dates="+t,{crossdomain:!0}).then(function(e){var t=e.data;o.decorateTideTimes(e.data.data),console.log(t),o.setState(t),o.setState({loading:!1})}).catch(function(e){console.error("error: ",e),o.setState({error:e})})}},{key:"render",value:function(){console.log("TideTimes.render()"),console.log(this.props),console.log(this.state);var e=this.state,t=e.loading,o=e.error,a=e.data;return t?r.a.createElement(I.a,{variant:"h3"},r.a.createElement(k.a,{id:"App.error.loading"})):!a||function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(a)?r.a.createElement(I.a,{variant:"h3"},r.a.createElement(k.a,{id:"App.error.no_data_avail"})):o?r.a.createElement(I.a,{variant:"h4"},"There was an error loading the repos."," ",r.a.createElement("button",{onClick:this.loadData},"Try again")):r.a.createElement(ee,{key:this.props.location.pathname+this.props.location.search,siteData:this.state.data})}}],[{key:"getSiteNameFromProps",value:function(e){var t=F.a.parse("/"+e.location.search);return t.siteId?t.siteId:t["/?siteId"]}},{key:"getDerivedStateFromProps",value:function(e,o){console.log("TideTimes.getDerivedStateFromProps()");var a=t.getSiteNameFromProps(e);return o.siteName!==a?{siteName:a,data:null,loading:!0}:null}}]),t}(a.Component),oe=Object(k.d)(te),ae=o(364),re=o(365),ne=o(363);Object(k.c)([].concat(Object(p.a)(T.a),Object(p.a)(C.a)));var ie=navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage||"en-US",le=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){console.log("App.componentDidMount()")}},{key:"componentDidUpdate",value:function(e){console.log("App.componentDidUpdate()")}},{key:"componentWillReceiveProps",value:function(e){console.log("App.componentWillReceiveProps()")}},{key:"render",value:function(){var e=Object(b.createMuiTheme)({typography:{useNextVariants:!0},palette:{primary:v.a,background:{paper:"#ffffff",default:"#fafafa"}}});return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,null),r.a.createElement(b.MuiThemeProvider,{theme:e},r.a.createElement(k.b,{locale:ie,messages:D[ie]},r.a.createElement(ae.a,null,r.a.createElement(L,null,r.a.createElement(re.a,null,r.a.createElement(ne.a,{path:"/",exact:!0,component:oe}),r.a.createElement(ne.a,{path:"/?siteId=:siteId",exact:!0,component:oe}),r.a.createElement(ne.a,{component:function(){return r.a.createElement("h1",null,"No path in router")}})," "))))))}}]),t}(a.Component),se=Object(b.withStyles)(h.a)(le);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o(360);var de=navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage;i.a.render(r.a.createElement(se,{language:de}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[206,1,2]]]);
//# sourceMappingURL=main.f7aa1a9d.chunk.js.map